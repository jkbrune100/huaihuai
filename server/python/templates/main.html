<html>
    <head>
        <title>{{ title }}</title>
    </head>
    <body>
        <canvas id="canvas" style="width:600;height:600;background:green">
        </canvas>
    </body>
    <script>
        let out_standing = 0;
        
        let canvas = document.getElementById("canvas");
        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
            };
        }
        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = getMousePos(canvas, evt);
            console.log('Mouse position: ' + mousePos.x + ',' + mousePos.y);
            const x = mousePos.x;
            const y = mousePos.y;
            if ( out_standing < 3 ) {
            
		    const xhr = new XMLHttpRequest()
		    xhr.onload = (e) => {
		         console.log( e.responseText );
		         out_standing--;    
		    }
		    //open a get request with the remote server URL
	//            xhr.open("PUT", "/joints/j1=0.00&j2=1.0&j3=3.0&j4=3.14", true);
		    xhr.open("PUT", `/joints?j1=${x}&j2=${y}&j3=4.0&j4=10`, true);
		    xhr.send();
		    out_standing++;
	    }		    
            
//send the Http request
        }, false);
    </script>
</html>
